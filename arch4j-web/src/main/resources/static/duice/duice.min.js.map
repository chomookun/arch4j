{"version":3,"file":"duice.min.js","sources":["DataElementFactory.js","Configuration.js","common.js","Observable.js","DataElement.js","event/DataEvent.js","DataHandler.js","format/StringFormat.js","format/NumberFormat.js","format/DateFormat.js","format/FormatFactory.js","ObjectElement.js","event/PropertyChangeEvent.js","ObjectHandler.js","event/ItemDeleteEvent.js","event/ItemSelectEvent.js","event/ItemMoveEvent.js","event/ItemInsertEvent.js","ArrayHandler.js","ArrayProxy.js","ObjectProxy.js","CustomElementFactory.js","ObjectElementFactory.js","DataElementRegistry.js","Initializer.js","ArrayElement.js","ArrayElementFactory.js","dialog/Dialog.js","index.js","element/ImgElement.js","element/ImgElementFactory.js","element/InputElement.js","element/InputCheckboxElement.js","element/InputDatetimeLocalElement.js","element/InputNumberElement.js","element/InputRadioElement.js","element/InputElementFactory.js","element/SelectElement.js","element/SelectElementFactory.js","element/TextareaElement.js","element/TextareaElementFactory.js","dialog/AlertDialog.js","dialog/ConfirmDialog.js","CustomElement.js","dialog/PromptDialog.js","tab/TabFolder.js","tab/TabItem.js"],"sourcesContent":["export class DataElementFactory {\n}\n//# sourceMappingURL=DataElementFactory.js.map","export class Configuration {\n    static setNamespace(value) {\n        this.namespace = value;\n    }\n    static getNamespace() {\n        return this.namespace;\n    }\n}\nConfiguration.namespace = 'duice';\n//# sourceMappingURL=Configuration.js.map","import { Configuration } from \"./Configuration\";\nexport function getElementQuerySelector() {\n    let namespace = Configuration.getNamespace();\n    return `*[data-${namespace}-bind]:not([data-${namespace}-id])`;\n}\nexport function markInitialized(container) {\n    container.querySelectorAll(getElementQuerySelector()).forEach(element => {\n        setElementAttribute(element, 'id', '_');\n    });\n}\nexport function findVariable(context, name) {\n    // find in context\n    try {\n        let object = new Function(`return this.${name};`).call(context);\n        if (object) {\n            return object;\n        }\n    }\n    catch (ignore) { }\n    // find in global\n    try {\n        let object = new Function(`return ${name};`).call(null);\n        if (object) {\n            return object;\n        }\n    }\n    catch (ignore) { }\n    // throw error\n    console.warn(`Object[${name}] is not found`);\n    return undefined;\n}\nexport function runCode(code, htmlElement, context) {\n    try {\n        let args = [];\n        let values = [];\n        for (let property in context) {\n            args.push(property);\n            values.push(context[property]);\n        }\n        return Function(...args, code).call(htmlElement, ...values);\n    }\n    catch (e) {\n        console.error(code, e);\n        throw e;\n    }\n}\nexport function runIfCode(htmlElement, context) {\n    let ifClause = getElementAttribute(htmlElement, 'if');\n    if (ifClause) {\n        let result = runCode(ifClause, htmlElement, context);\n        if (!result) {\n            htmlElement.hidden = true;\n        }\n        else {\n            htmlElement.hidden = false;\n        }\n    }\n}\nexport function runExecuteCode(htmlElement, context) {\n    let script = getElementAttribute(htmlElement, 'execute');\n    if (script) {\n        runCode(script, htmlElement, context);\n    }\n}\nexport function hasElementAttribute(htmlElement, name) {\n    let namespace = Configuration.getNamespace();\n    return htmlElement.hasAttribute(`data-${namespace}-${name}`);\n}\nexport function getElementAttribute(htmlElement, name) {\n    let namespace = Configuration.getNamespace();\n    return htmlElement.getAttribute(`data-${namespace}-${name}`);\n}\nexport function setElementAttribute(htmlElement, name, value) {\n    let namespace = Configuration.getNamespace();\n    htmlElement.setAttribute(`data-${namespace}-${name}`, value);\n}\nexport function assert(condition, message) {\n    console.assert(condition, message);\n    if (!condition) {\n        throw new Error(message || 'Assertion Failed');\n    }\n}\n//# sourceMappingURL=common.js.map","export class Observable {\n    constructor() {\n        this.observers = [];\n        this.notifyEnabled = true;\n    }\n    addObserver(observer) {\n        this.observers.push(observer);\n    }\n    removeObserver(observer) {\n        for (let i = 0, size = this.observers.length; i < size; i++) {\n            if (this.observers[i] === observer) {\n                this.observers.splice(i, 1);\n                return;\n            }\n        }\n    }\n    suspendNotify() {\n        this.notifyEnabled = false;\n    }\n    resumeNotify() {\n        this.notifyEnabled = true;\n    }\n    notifyObservers(dataEvent) {\n        if (this.notifyEnabled) {\n            this.observers.forEach(observer => {\n                observer.update(this, dataEvent);\n            });\n        }\n    }\n}\n//# sourceMappingURL=Observable.js.map","import { assert, setElementAttribute } from \"./common\";\nimport { Observable } from \"./Observable\";\nexport class DataElement extends Observable {\n    constructor(htmlElement, bindData, context) {\n        var _a;\n        super();\n        this.htmlElement = htmlElement;\n        this.bindData = bindData;\n        this.context = context;\n        setElementAttribute(this.htmlElement, 'id', this.generateId());\n        // bind data\n        let dataHandler = (_a = globalThis.Object.getOwnPropertyDescriptor(this.bindData, '_handler_')) === null || _a === void 0 ? void 0 : _a.value;\n        assert(dataHandler, 'DataHandler is not found');\n        this.addObserver(dataHandler);\n        dataHandler.addObserver(this);\n    }\n    generateId() {\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            let r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n            return v.toString(16);\n        });\n    }\n    getHtmlElement() {\n        return this.htmlElement;\n    }\n    getContext() {\n        return this.context;\n    }\n    getBindData() {\n        return this.bindData;\n    }\n}\n//# sourceMappingURL=DataElement.js.map","export class DataEvent {\n    constructor(source) {\n        this.source = source;\n    }\n}\n//# sourceMappingURL=DataEvent.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Observable } from \"./Observable\";\nimport { DataEvent } from \"./event/DataEvent\";\nexport class DataHandler extends Observable {\n    constructor() {\n        super();\n        this.readonlyAll = false;\n        this.readonly = new Set();\n        this.disableAll = false;\n        this.disable = new Set();\n        this.listenerEnabled = true;\n    }\n    setTarget(target) {\n        this.target = target;\n    }\n    getTarget() {\n        return this.target;\n    }\n    setReadonlyAll(readonly) {\n        this.readonlyAll = readonly;\n        if (!readonly) {\n            this.readonly.clear();\n        }\n        this.notifyObservers(new DataEvent(this));\n    }\n    isReadonlyAll() {\n        return this.readonlyAll;\n    }\n    setReadonly(property, readonly) {\n        if (readonly) {\n            this.readonly.add(property);\n        }\n        else {\n            this.readonly.delete(property);\n        }\n        this.notifyObservers(new DataEvent(this));\n    }\n    isReadonly(property) {\n        return this.readonlyAll || this.readonly.has(property);\n    }\n    setDisableAll(disable) {\n        this.disableAll = disable;\n        if (!disable) {\n            this.disable.clear();\n        }\n        this.notifyObservers(new DataEvent(this));\n    }\n    isDisableAll() {\n        return this.disableAll;\n    }\n    setDisable(property, disable) {\n        if (disable) {\n            this.disable.add(property);\n        }\n        else {\n            this.disable.delete(property);\n        }\n        this.notifyObservers(new DataEvent(this));\n    }\n    isDisable(property) {\n        return this.disableAll || this.disable.has(property);\n    }\n    suspendListener() {\n        this.listenerEnabled = false;\n    }\n    resumeListener() {\n        this.listenerEnabled = true;\n    }\n    checkListener(listener, event) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.listenerEnabled && listener) {\n                let result = yield listener.call(this.getTarget(), event);\n                if (result == false) {\n                    return false;\n                }\n            }\n            return true;\n        });\n    }\n}\n//# sourceMappingURL=DataHandler.js.map","export class StringFormat {\n    constructor(pattern) {\n        this.pattern = pattern;\n    }\n    format(value) {\n        if (!value) {\n            return value;\n        }\n        let encodedValue = '';\n        let patternChars = this.pattern.split('');\n        let valueChars = value.split('');\n        let valueCharsPosition = 0;\n        for (let i = 0, size = patternChars.length; i < size; i++) {\n            let patternChar = patternChars[i];\n            if (patternChar === '#') {\n                encodedValue += valueChars[valueCharsPosition++] || '';\n            }\n            else {\n                encodedValue += patternChar;\n            }\n            if (valueCharsPosition >= valueChars.length) {\n                break;\n            }\n        }\n        return encodedValue;\n    }\n    parse(value) {\n        if (!value) {\n            return value;\n        }\n        let decodedValue = '';\n        let patternChars = this.pattern.split('');\n        let valueChars = value.split('');\n        let valueCharsPosition = 0;\n        for (let i = 0, size = patternChars.length; i < size; i++) {\n            let patternChar = patternChars[i];\n            if (patternChar === '#') {\n                decodedValue += valueChars[valueCharsPosition++] || '';\n            }\n            else {\n                valueCharsPosition++;\n            }\n        }\n        return decodedValue;\n    }\n}\n//# sourceMappingURL=StringFormat.js.map","export class NumberFormat {\n    constructor(scale) {\n        this.scale = 0;\n        this.scale = scale;\n    }\n    format(number) {\n        if (isNaN(Number(number))) {\n            return '';\n        }\n        number = Number(number);\n        let string;\n        if (this.scale > 0) {\n            string = String(number.toFixed(this.scale));\n        }\n        else {\n            string = String(number);\n        }\n        let reg = /(^[+-]?\\d+)(\\d{3})/;\n        while (reg.test(string)) {\n            string = string.replace(reg, '$1' + ',' + '$2');\n        }\n        return string;\n    }\n    parse(string) {\n        if (!string) {\n            return null;\n        }\n        if (string.length === 1 && /[+-]/.test(string)) {\n            string += '0';\n        }\n        string = string.replace(/,/gi, '');\n        if (isNaN(Number(string))) {\n            throw 'NaN';\n        }\n        let number = Number(string);\n        if (this.scale > 0) {\n            number = Number(number.toFixed(this.scale));\n        }\n        return number;\n    }\n}\n//# sourceMappingURL=NumberFormat.js.map","export class DateFormat {\n    constructor(pattern) {\n        this.patternRex = /yyyy|yy|MM|dd|HH|hh|mm|ss/gi;\n        this.pattern = pattern;\n    }\n    format(string) {\n        if (!string) {\n            return '';\n        }\n        let date = new Date(string);\n        string = this.pattern.replace(this.patternRex, function ($1) {\n            switch ($1) {\n                case \"yyyy\":\n                    return date.getFullYear();\n                case \"yy\":\n                    return String(date.getFullYear() % 1000).padStart(2, '0');\n                case \"MM\":\n                    return String(date.getMonth() + 1).padStart(2, '0');\n                case \"dd\":\n                    return String(date.getDate()).padStart(2, '0');\n                case \"HH\":\n                    return String(date.getHours()).padStart(2, '0');\n                case \"hh\":\n                    return String(date.getHours() <= 12 ? date.getHours() : date.getHours() % 12).padStart(2, '0');\n                case \"mm\":\n                    return String(date.getMinutes()).padStart(2, '0');\n                case \"ss\":\n                    return String(date.getSeconds()).padStart(2, '0');\n                default:\n                    return $1;\n            }\n        });\n        return string;\n    }\n    parse(string) {\n        if (!string) {\n            return null;\n        }\n        let date = new Date(0, 0, 0, 0, 0, 0);\n        let match;\n        while ((match = this.patternRex.exec(this.pattern)) != null) {\n            let formatString = match[0];\n            let formatIndex = match.index;\n            let formatLength = formatString.length;\n            let matchValue = string.substr(formatIndex, formatLength);\n            matchValue = matchValue.padEnd(formatLength, '0');\n            switch (formatString) {\n                case 'yyyy': {\n                    let fullYear = parseInt(matchValue);\n                    date.setFullYear(fullYear);\n                    break;\n                }\n                case 'yy': {\n                    let yyValue = parseInt(matchValue);\n                    let yearPrefix = Math.floor(new Date().getFullYear() / 100);\n                    let fullYear = yearPrefix * 100 + yyValue;\n                    date.setFullYear(fullYear);\n                    break;\n                }\n                case 'MM': {\n                    let monthValue = parseInt(matchValue);\n                    date.setMonth(monthValue - 1);\n                    break;\n                }\n                case 'dd': {\n                    let dateValue = parseInt(matchValue);\n                    date.setDate(dateValue);\n                    break;\n                }\n                case 'HH': {\n                    let hoursValue = parseInt(matchValue);\n                    date.setHours(hoursValue);\n                    break;\n                }\n                case 'hh': {\n                    let hoursValue = parseInt(matchValue);\n                    date.setHours(hoursValue > 12 ? (hoursValue + 12) : hoursValue);\n                    break;\n                }\n                case 'mm': {\n                    let minutesValue = parseInt(matchValue);\n                    date.setMinutes(minutesValue);\n                    break;\n                }\n                case 'ss': {\n                    let secondsValue = parseInt(matchValue);\n                    date.setSeconds(secondsValue);\n                    break;\n                }\n            }\n        }\n        // timezone offset\n        let tzo = new Date().getTimezoneOffset() * -1, dif = tzo >= 0 ? '+' : '-', pad = function (num) {\n            return (num < 10 ? '0' : '') + num;\n        };\n        // return iso string\n        return date.getFullYear() +\n            '-' + pad(date.getMonth() + 1) +\n            '-' + pad(date.getDate()) +\n            'T' + pad(date.getHours()) +\n            ':' + pad(date.getMinutes()) +\n            ':' + pad(date.getSeconds()) +\n            dif + pad(Math.floor(Math.abs(tzo) / 60)) +\n            ':' + pad(Math.abs(tzo) % 60);\n    }\n}\n//# sourceMappingURL=DateFormat.js.map","import { StringFormat } from \"./StringFormat\";\nimport { NumberFormat } from \"./NumberFormat\";\nimport { DateFormat } from \"./DateFormat\";\nexport class FormatFactory {\n    static getFormat(format) {\n        let name;\n        let args;\n        const match = format.match(/^([a-zA-Z_][a-zA-Z0-9_]*)\\((.*)\\)$/);\n        if (match) {\n            name = match[1];\n            args = match[2].split(',').map(arg => arg.trim().replace(/^['\"]|['\"]$/g, ''));\n        }\n        if (format.startsWith('string')) {\n            return new StringFormat(args[0]);\n        }\n        if (format.startsWith('number')) {\n            return new NumberFormat(args[0]);\n        }\n        if (format.startsWith('date')) {\n            return new DateFormat(args[0]);\n        }\n        return null;\n    }\n}\n//# sourceMappingURL=FormatFactory.js.map","import { findVariable, getElementAttribute, runExecuteCode, runIfCode } from \"./common\";\nimport { DataElement } from \"./DataElement\";\nimport { ObjectProxy } from \"./ObjectProxy\";\nimport { ObjectHandler } from \"./ObjectHandler\";\nimport { FormatFactory } from \"./format/FormatFactory\";\nexport class ObjectElement extends DataElement {\n    constructor(htmlElement, bindData, context) {\n        super(htmlElement, bindData, context);\n        // attributes\n        this.property = getElementAttribute(htmlElement, 'property');\n        let format = getElementAttribute(htmlElement, 'format');\n        if (format) {\n            this.format = FormatFactory.getFormat(format);\n        }\n    }\n    getProperty() {\n        return this.property;\n    }\n    getFormat() {\n        return this.format;\n    }\n    render() {\n        // check if\n        this.checkIf();\n        if (this.property) {\n            let objectHandler = ObjectProxy.getHandler(this.getBindData());\n            // set value\n            let value = objectHandler.getValue(this.property);\n            this.setValue(value);\n            // set readonly\n            let readonly = objectHandler.isReadonly(this.property);\n            this.setReadonly(readonly);\n            // set disable\n            let disable = objectHandler.isDisable(this.property);\n            this.setDisable(disable);\n        }\n        // executes script\n        this.executeScript();\n    }\n    checkIf() {\n        let context = Object.assign({}, this.getContext());\n        let bind = getElementAttribute(this.getHtmlElement(), 'bind');\n        let bindSplit = bind.split('.');\n        if (bindSplit.length > 1) {\n            context[bindSplit[0]] = findVariable(context, bindSplit[0]);\n        }\n        else {\n            context[bind] = this.getBindData();\n        }\n        runIfCode(this.htmlElement, context);\n    }\n    executeScript() {\n        let context = Object.assign({}, this.getContext());\n        let bind = getElementAttribute(this.getHtmlElement(), 'bind');\n        let bindSplit = bind.split('.');\n        if (bindSplit.length > 1) {\n            context[bindSplit[0]] = findVariable(context, bindSplit[0]);\n        }\n        else {\n            context[bind] = this.getBindData();\n        }\n        runExecuteCode(this.htmlElement, context);\n    }\n    update(observable, event) {\n        console.debug('ObjectElement.update', observable, event);\n        // ObjectHandler\n        if (observable instanceof ObjectHandler) {\n            // check if\n            this.checkIf();\n            if (this.property) {\n                // set value\n                this.setValue(observable.getValue(this.property));\n                // set readonly\n                this.setReadonly(observable.isReadonly(this.property));\n                // set disable\n                this.setDisable(observable.isDisable(this.property));\n            }\n            // executes script\n            this.executeScript();\n        }\n    }\n    setValue(value) {\n        if (value !== undefined && value !== null) {\n            value = this.getFormat() ? this.getFormat().format(value) : value;\n            this.htmlElement.innerText = value;\n        }\n        else {\n            this.htmlElement.innerText = '';\n        }\n    }\n    getValue() {\n        let value = this.htmlElement.innerText;\n        if (value && value.trim().length > 0) {\n            value = this.getFormat() ? this.getFormat().parse(value) : value;\n        }\n        else {\n            value = null;\n        }\n        return value;\n    }\n    setReadonly(readonly) {\n        // no-op\n    }\n    setDisable(disable) {\n        // no-op\n    }\n    getIndex() {\n        let index = getElementAttribute(this.htmlElement, 'index');\n        if (index) {\n            return Number(index);\n        }\n    }\n    focus() {\n        // no-ops\n        return false;\n    }\n}\n//# sourceMappingURL=ObjectElement.js.map","import { DataEvent } from \"./DataEvent\";\nexport class PropertyChangeEvent extends DataEvent {\n    constructor(source, property, value, index) {\n        super(source);\n        this.property = property;\n        this.value = value;\n        this.index = index;\n    }\n    getProperty() {\n        return this.property;\n    }\n    getValue() {\n        return this.value;\n    }\n    getIndex() {\n        return this.index;\n    }\n}\n//# sourceMappingURL=PropertyChangeEvent.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DataHandler } from \"./DataHandler\";\nimport { ObjectElement } from \"./ObjectElement\";\nimport { PropertyChangeEvent } from \"./event/PropertyChangeEvent\";\nexport class ObjectHandler extends DataHandler {\n    constructor() {\n        super();\n    }\n    get(target, property, receiver) {\n        return Reflect.get(target, property, receiver);\n    }\n    set(target, property, value) {\n        // change value\n        Reflect.set(target, property, value);\n        // notify\n        let event = new PropertyChangeEvent(this, property, value);\n        this.notifyObservers(event);\n        // returns\n        return true;\n    }\n    update(observable, event) {\n        return __awaiter(this, void 0, void 0, function* () {\n            console.debug(\"ObjectHandler.update\", observable, event);\n            // Element\n            if (observable instanceof ObjectElement) {\n                let property = observable.getProperty();\n                let value = observable.getValue();\n                if (yield this.checkListener(this.propertyChangingListener, event)) {\n                    this.setValue(property, value);\n                    yield this.checkListener(this.propertyChangedListener, event);\n                }\n            }\n            // notify\n            this.notifyObservers(event);\n        });\n    }\n    getValue(property) {\n        property = property.replace('.', '?.');\n        return new Function(`return this.${property};`).call(this.getTarget());\n    }\n    setValue(property, value) {\n        new Function('value', `this.${property} = value;`).call(this.getTarget(), value);\n    }\n    focus(property) {\n        this.observers.forEach(observer => {\n            if (observer instanceof ObjectElement) {\n                if (observer.getProperty() === property) {\n                    if (observer.focus()) {\n                        return false;\n                    }\n                }\n            }\n        });\n    }\n}\n//# sourceMappingURL=ObjectHandler.js.map","import { DataEvent } from \"./DataEvent\";\nexport class ItemInsertEvent extends DataEvent {\n    constructor(source, index, items) {\n        super(source);\n        this.items = [];\n        this.index = index;\n        this.items = items;\n    }\n    getIndex() {\n        return this.index;\n    }\n    getItems() {\n        return this.items;\n    }\n}\n//# sourceMappingURL=ItemDeleteEvent.js.map","import { DataEvent } from \"./DataEvent\";\nexport class ItemSelectEvent extends DataEvent {\n    constructor(source, index) {\n        super(source);\n        this.index = index;\n    }\n    getIndex() {\n        return this.index;\n    }\n}\n//# sourceMappingURL=ItemSelectEvent.js.map","import { DataEvent } from \"./DataEvent\";\nexport class ItemMoveEvent extends DataEvent {\n    constructor(source, fromIndex, toIndex) {\n        super(source);\n        this.fromIndex = fromIndex;\n        this.toIndex = toIndex;\n    }\n    getFromIndex() {\n        return this.fromIndex;\n    }\n    getToIndex() {\n        return this.toIndex;\n    }\n}\n//# sourceMappingURL=ItemMoveEvent.js.map","import { DataEvent } from \"./DataEvent\";\nexport class ItemDeleteEvent extends DataEvent {\n    constructor(source, index, items) {\n        super(source);\n        this.items = [];\n        this.index = index;\n        this.items = items;\n    }\n    getIndex() {\n        return this.index;\n    }\n    getItems() {\n        return this.items;\n    }\n}\n//# sourceMappingURL=ItemInsertEvent.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DataHandler } from \"./DataHandler\";\nimport { ArrayProxy } from \"./ArrayProxy\";\nimport { ArrayElement } from \"./ArrayElement\";\nimport { ItemInsertEvent } from \"./event/ItemDeleteEvent\";\nimport { ItemSelectEvent } from \"./event/ItemSelectEvent\";\nimport { DataEvent } from \"./event/DataEvent\";\nimport { ItemMoveEvent } from \"./event/ItemMoveEvent\";\nimport { ObjectProxy } from \"./ObjectProxy\";\nimport { ItemDeleteEvent } from \"./event/ItemInsertEvent\";\nexport class ArrayHandler extends DataHandler {\n    constructor() {\n        super();\n    }\n    get(target, property, receiver) {\n        let _this = this;\n        const value = target[property];\n        if (typeof value === 'function') {\n            // push, unshift\n            if (['push', 'unshift'].includes(property)) {\n                return function () {\n                    var arguments_1 = arguments;\n                    return __awaiter(this, void 0, void 0, function* () {\n                        let index;\n                        if (property === 'push') {\n                            index = receiver['length'];\n                        }\n                        else if (property === 'unshift') {\n                            index = 0;\n                        }\n                        let rows = [];\n                        for (let i in arguments_1) {\n                            rows.push(arguments_1[i]);\n                        }\n                        yield _this.insertItem(target, index, ...rows);\n                        return target.length;\n                    });\n                };\n            }\n            // splice\n            if (['splice'].includes(property)) {\n                return function () {\n                    var arguments_2 = arguments;\n                    return __awaiter(this, void 0, void 0, function* () {\n                        // parse arguments\n                        let start = arguments_2[0];\n                        let deleteCount = arguments_2[1];\n                        let deleteRows = [];\n                        for (let i = start; i < (start + deleteCount); i++) {\n                            deleteRows.push(target[i]);\n                        }\n                        let insertRows = [];\n                        for (let i = 2; i < arguments_2.length; i++) {\n                            insertRows.push(arguments_2[i]);\n                        }\n                        // delete rows\n                        if (deleteCount > 0) {\n                            yield _this.deleteItem(target, start, deleteCount);\n                        }\n                        // insert rows\n                        if (insertRows.length > 0) {\n                            yield _this.insertItem(target, start, ...insertRows);\n                        }\n                        // returns deleted rows\n                        return deleteRows;\n                    });\n                };\n            }\n            // pop, shift\n            if (['pop', 'shift'].includes(property)) {\n                return function () {\n                    return __awaiter(this, void 0, void 0, function* () {\n                        let index;\n                        if (property === 'pop') {\n                            index = receiver['length'] - 1;\n                        }\n                        else if (property === 'shift') {\n                            index = 0;\n                        }\n                        let rows = [target[index]];\n                        yield _this.deleteItem(target, index);\n                        return rows;\n                    });\n                };\n            }\n            // bind\n            return value.bind(target);\n        }\n        // return\n        return value;\n    }\n    set(target, property, value) {\n        Reflect.set(target, property, value);\n        if (property === 'length') {\n            this.notifyObservers(new DataEvent(this));\n        }\n        return true;\n    }\n    update(observable, event) {\n        return __awaiter(this, void 0, void 0, function* () {\n            console.debug(\"ArrayHandler.update\", observable, event);\n            // instance is array component\n            if (observable instanceof ArrayElement) {\n                // row select event\n                if (event instanceof ItemSelectEvent) {\n                    this.selectedItemIndex = event.getIndex();\n                    return;\n                }\n                // row move event\n                if (event instanceof ItemMoveEvent) {\n                    let object = this.getTarget().splice(event.getFromIndex(), 1)[0];\n                    this.getTarget().splice(event.getToIndex(), 0, object);\n                }\n            }\n            // notify observers\n            this.notifyObservers(event);\n        });\n    }\n    insertItem(arrayProxy, index, ...rows) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let arrayHandler = ArrayProxy.getHandler(arrayProxy);\n            let proxyTarget = ArrayProxy.getTarget(arrayProxy);\n            rows.forEach((object, index) => {\n                let objectProxy = new ObjectProxy(object);\n                let objectHandler = ObjectProxy.getHandler(objectProxy);\n                objectHandler.propertyChangingListener = this.propertyChangingListener;\n                objectHandler.propertyChangedListener = this.propertyChangedListener;\n                rows[index] = objectProxy;\n            });\n            let event = new ItemInsertEvent(this, index, rows);\n            if (yield arrayHandler.checkListener(arrayHandler.rowInsertingListener, event)) {\n                proxyTarget.splice(index, 0, ...rows);\n                yield arrayHandler.checkListener(arrayHandler.rowInsertedListener, event);\n                arrayHandler.notifyObservers(event);\n            }\n        });\n    }\n    deleteItem(arrayProxy, index, size) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let arrayHandler = ArrayProxy.getHandler(arrayProxy);\n            let proxyTarget = ArrayProxy.getTarget(arrayProxy);\n            let sliceBegin = index;\n            let sliceEnd = (size ? index + size : index + 1);\n            let rows = proxyTarget.slice(sliceBegin, sliceEnd);\n            let event = new ItemDeleteEvent(this, index, rows);\n            if (yield arrayHandler.checkListener(arrayHandler.rowDeletingListener, event)) {\n                let spliceStart = index;\n                let spliceDeleteCount = (size ? size : 1);\n                proxyTarget.splice(spliceStart, spliceDeleteCount);\n                yield arrayHandler.checkListener(arrayHandler.rowDeletedListener, event);\n                arrayHandler.notifyObservers(event);\n            }\n        });\n    }\n    appendItem(arrayProxy, ...rows) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let index = arrayProxy.length;\n            return this.insertItem(arrayProxy, index, ...rows);\n        });\n    }\n    selectItem(index) {\n        this.selectedItemIndex = index;\n        // notify row select event\n        let rowSelectEvent = new ItemSelectEvent(this, this.selectedItemIndex);\n        this.notifyObservers(rowSelectEvent);\n    }\n    getSelectedItemIndex() {\n        return this.selectedItemIndex;\n    }\n}\n//# sourceMappingURL=ArrayHandler.js.map","import { ArrayHandler } from \"./ArrayHandler\";\nimport { assert } from \"./common\";\nimport { ObjectProxy } from \"./ObjectProxy\";\nimport { DataEvent } from \"./event/DataEvent\";\nexport class ArrayProxy extends globalThis.Array {\n    constructor(array) {\n        super();\n        // is already proxy\n        if (ArrayProxy.isProxy(array)) {\n            return array;\n        }\n        // array handler\n        let arrayHandler = new ArrayHandler();\n        // copy array elements\n        if (globalThis.Array.isArray(array)) {\n            for (let i = 0; i < array.length; i++) {\n                array[i] = new ObjectProxy(array[i]);\n            }\n        }\n        // create proxy\n        let arrayProxy = new Proxy(array, arrayHandler);\n        arrayHandler.setTarget(array);\n        // set property\n        ArrayProxy.setHandler(arrayProxy, arrayHandler);\n        ArrayProxy.setTarget(arrayProxy, array);\n        // returns\n        return arrayProxy;\n    }\n    static clear(arrayProxy) {\n        let arrayHandler = this.getHandler(arrayProxy);\n        try {\n            // suspend\n            arrayHandler.suspendListener();\n            arrayHandler.suspendNotify();\n            // clear element\n            arrayProxy.length = 0;\n        }\n        finally {\n            // resume\n            arrayHandler.resumeListener();\n            arrayHandler.resumeNotify();\n        }\n        // notify observers\n        arrayHandler.notifyObservers(new DataEvent(this));\n    }\n    static assign(arrayProxy, array) {\n        let arrayHandler = this.getHandler(arrayProxy);\n        try {\n            // suspend\n            arrayHandler.suspendListener();\n            arrayHandler.suspendNotify();\n            // clears elements\n            arrayProxy.length = 0;\n            // creates elements\n            array.forEach((object, index) => {\n                let objectProxy = new ObjectProxy(object);\n                arrayProxy[index] = objectProxy;\n                // readonly\n                ObjectProxy.setReadonlyAll(objectProxy, arrayHandler.isReadonlyAll());\n                arrayHandler.readonly.forEach(property => {\n                    ObjectProxy.setReadonly(objectProxy, property, true);\n                });\n                // disable\n                ObjectProxy.setDisableAll(objectProxy, arrayHandler.isDisableAll());\n                arrayHandler.disable.forEach(property => {\n                    ObjectProxy.setDisable(objectProxy, property, true);\n                });\n                // add listener\n                ObjectProxy.onPropertyChanging(objectProxy, arrayHandler.propertyChangingListener);\n                ObjectProxy.onPropertyChanged(objectProxy, arrayHandler.propertyChangedListener);\n            });\n        }\n        finally {\n            // resume\n            arrayHandler.resumeListener();\n            arrayHandler.resumeNotify();\n        }\n        // notify observers\n        arrayHandler.notifyObservers(new DataEvent(this));\n    }\n    static isProxy(array) {\n        return array.hasOwnProperty('_target_');\n    }\n    static setTarget(arrayProxy, target) {\n        globalThis.Object.defineProperty(arrayProxy, '_target_', {\n            value: target,\n            writable: true\n        });\n    }\n    static getTarget(arrayProxy) {\n        return globalThis.Object.getOwnPropertyDescriptor(arrayProxy, '_target_').value;\n    }\n    static setHandler(arrayProxy, arrayHandler) {\n        globalThis.Object.defineProperty(arrayProxy, '_handler_', {\n            value: arrayHandler,\n            writable: true\n        });\n    }\n    static getHandler(arrayProxy) {\n        let handler = globalThis.Object.getOwnPropertyDescriptor(arrayProxy, '_handler_').value;\n        assert(handler, 'handler is not found');\n        return handler;\n    }\n    static save(arrayProxy) {\n        let origin = JSON.stringify(arrayProxy);\n        globalThis.Object.defineProperty(arrayProxy, '_origin_', {\n            value: origin,\n            writable: true\n        });\n    }\n    static reset(arrayProxy) {\n        let origin = JSON.parse(globalThis.Object.getOwnPropertyDescriptor(arrayProxy, '_origin_').value);\n        this.assign(arrayProxy, origin);\n    }\n    static onPropertyChanging(arrayProxy, listener) {\n        this.getHandler(arrayProxy).propertyChangingListener = listener;\n        arrayProxy.forEach(objectProxy => {\n            ObjectProxy.getHandler(objectProxy).propertyChangingListener = listener;\n        });\n    }\n    static onPropertyChanged(arrayProxy, listener) {\n        this.getHandler(arrayProxy).propertyChangedListener = listener;\n        arrayProxy.forEach(objectProxy => {\n            ObjectProxy.getHandler(objectProxy).propertyChangedListener = listener;\n        });\n    }\n    static onRowInserting(arrayProxy, listener) {\n        this.getHandler(arrayProxy).rowInsertingListener = listener;\n    }\n    static onRowInserted(arrayProxy, listener) {\n        this.getHandler(arrayProxy).rowInsertedListener = listener;\n    }\n    static onRowDeleting(arrayProxy, listener) {\n        this.getHandler(arrayProxy).rowDeletingListener = listener;\n    }\n    static onRowDeleted(arrayProxy, listener) {\n        this.getHandler(arrayProxy).rowDeletedListener = listener;\n    }\n    static setReadonly(arrayProxy, property, readonly) {\n        this.getHandler(arrayProxy).setReadonly(property, readonly);\n        arrayProxy.forEach(objectProxy => {\n            ObjectProxy.setReadonly(objectProxy, property, readonly);\n        });\n    }\n    static isReadonly(arrayProxy, property) {\n        return this.getHandler(arrayProxy).isReadonly(property);\n    }\n    static setReadonlyAll(arrayProxy, readonly) {\n        this.getHandler(arrayProxy).setReadonlyAll(readonly);\n        arrayProxy.forEach(objectProxy => {\n            ObjectProxy.setReadonlyAll(objectProxy, readonly);\n        });\n    }\n    static isReadonlyAll(arrayProxy) {\n        return this.getHandler(arrayProxy).isReadonlyAll();\n    }\n    static setDisable(arrayProxy, property, disable) {\n        this.getHandler(arrayProxy).setDisable(property, disable);\n        arrayProxy.forEach(objectProxy => {\n            ObjectProxy.setDisable(objectProxy, property, disable);\n        });\n    }\n    static isDisable(arrayProxy, property) {\n        return this.getHandler(arrayProxy).isDisable(property);\n    }\n    static setDisableAll(arrayProxy, disable) {\n        this.getHandler(arrayProxy).setDisableAll(disable);\n        arrayProxy.forEach(objectProxy => {\n            ObjectProxy.setDisableAll(objectProxy, disable);\n        });\n    }\n    static isDisableAll(arrayProxy) {\n        return this.getHandler(arrayProxy).isDisableAll();\n    }\n    static selectItem(arrayProxy, index) {\n        return this.getHandler(arrayProxy).selectItem(index);\n    }\n    static getSelectedItemIndex(arrayProxy) {\n        return this.getHandler(arrayProxy).getSelectedItemIndex();\n    }\n}\n//# sourceMappingURL=ArrayProxy.js.map","import { ObjectHandler } from \"./ObjectHandler\";\nimport { ArrayProxy } from \"./ArrayProxy\";\nimport { assert } from \"./common\";\nimport { DataEvent } from \"./event/DataEvent\";\nexport class ObjectProxy extends globalThis.Object {\n    constructor(object) {\n        super();\n        // is already proxy\n        if (ObjectProxy.isProxy(object)) {\n            return object;\n        }\n        // object handler\n        let objectHandler = new ObjectHandler();\n        // copy property\n        for (let name in object) {\n            let value = object[name];\n            // value is array\n            if (Array.isArray(value)) {\n                let arrayProxy = new ArrayProxy(value);\n                ArrayProxy.getHandler(arrayProxy).addObserver(objectHandler);\n                object[name] = arrayProxy;\n                continue;\n            }\n            // value is object\n            if (value != null && typeof value === 'object') {\n                let objectProxy = new ObjectProxy(value);\n                ObjectProxy.getHandler(objectProxy).addObserver(objectHandler);\n                object[name] = objectProxy;\n                continue;\n            }\n            // value is primitive\n            object[name] = value;\n        }\n        // delete not exists property\n        for (let name in object) {\n            if (!Object.keys(object).includes(name)) {\n                delete this[name];\n            }\n        }\n        // creates proxy\n        let objectProxy = new Proxy(object, objectHandler);\n        objectHandler.setTarget(object);\n        // set property\n        ObjectProxy.setHandler(objectProxy, objectHandler);\n        ObjectProxy.setTarget(objectProxy, object);\n        // save\n        ObjectProxy.save(objectProxy);\n        // returns\n        return objectProxy;\n    }\n    static clear(objectProxy) {\n        let objectHandler = this.getHandler(objectProxy);\n        try {\n            // suspend\n            objectHandler.suspendListener();\n            objectHandler.suspendNotify();\n            // clear properties\n            for (let name in objectProxy) {\n                let value = objectProxy[name];\n                if (Array.isArray(value)) {\n                    ArrayProxy.clear(value);\n                    continue;\n                }\n                if (value != null && typeof value === 'object') {\n                    ObjectProxy.clear(value);\n                    continue;\n                }\n                objectProxy[name] = null;\n            }\n        }\n        finally {\n            // resume\n            objectHandler.resumeListener();\n            objectHandler.resumeNotify();\n        }\n        // notify observers\n        objectHandler.notifyObservers(new DataEvent(this));\n    }\n    static assign(objectProxy, object) {\n        let objectHandler = this.getHandler(objectProxy);\n        try {\n            // suspend\n            objectHandler.suspendListener();\n            objectHandler.suspendNotify();\n            // loop object properties\n            for (let name in object) {\n                let value = object[name];\n                // source value is array\n                if (Array.isArray(value)) {\n                    if (Array.isArray(objectProxy[name])) {\n                        ArrayProxy.assign(objectProxy[name], value);\n                    }\n                    else {\n                        objectProxy[name] = new ArrayProxy(value);\n                    }\n                    continue;\n                }\n                // source value is object\n                if (value != null && typeof value === 'object') {\n                    if (objectProxy[name] != null && typeof objectProxy[name] === 'object') {\n                        ObjectProxy.assign(objectProxy[name], value);\n                    }\n                    else {\n                        let objectProxy = new ObjectProxy(value);\n                        ObjectProxy.getHandler(objectProxy).addObserver(objectHandler);\n                        objectProxy[name] = objectProxy;\n                    }\n                    continue;\n                }\n                // source value is primitive\n                objectProxy[name] = value;\n            }\n            // save\n            this.save(objectProxy);\n        }\n        finally {\n            // resume\n            objectHandler.resumeListener();\n            objectHandler.resumeNotify();\n        }\n        // notify observers\n        objectHandler.notifyObservers(new DataEvent(this));\n    }\n    static isProxy(object) {\n        return object.hasOwnProperty('_target_');\n    }\n    static setTarget(objectProxy, target) {\n        globalThis.Object.defineProperty(objectProxy, '_target_', {\n            value: target,\n            writable: true\n        });\n    }\n    static getTarget(objectProxy) {\n        return globalThis.Object.getOwnPropertyDescriptor(objectProxy, '_target_').value;\n    }\n    static setHandler(objectProxy, objectHandler) {\n        globalThis.Object.defineProperty(objectProxy, '_handler_', {\n            value: objectHandler,\n            writable: true\n        });\n    }\n    static getHandler(objectProxy) {\n        let handler = globalThis.Object.getOwnPropertyDescriptor(objectProxy, '_handler_').value;\n        assert(handler, 'handler is not found');\n        return handler;\n    }\n    static save(objectProxy) {\n        let origin = JSON.stringify(objectProxy);\n        globalThis.Object.defineProperty(objectProxy, '_origin_', {\n            value: origin,\n            writable: true\n        });\n    }\n    static reset(objectProxy) {\n        let origin = JSON.parse(globalThis.Object.getOwnPropertyDescriptor(objectProxy, '_origin_').value);\n        this.assign(objectProxy, origin);\n    }\n    static onPropertyChanging(objectProxy, listener) {\n        this.getHandler(objectProxy).propertyChangingListener = listener;\n    }\n    static onPropertyChanged(objectProxy, listener) {\n        this.getHandler(objectProxy).propertyChangedListener = listener;\n    }\n    static setReadonly(objectProxy, property, readonly) {\n        this.getHandler(objectProxy).setReadonly(property, readonly);\n    }\n    static isReadonly(objectProxy, property) {\n        return this.getHandler(objectProxy).isReadonly(property);\n    }\n    static setReadonlyAll(objectProxy, readonly) {\n        this.getHandler(objectProxy).setReadonlyAll(readonly);\n    }\n    static isReadonlyAll(objectProxy) {\n        return this.getHandler(objectProxy).isReadonlyAll();\n    }\n    static setDisable(objectProxy, property, disable) {\n        this.getHandler(objectProxy).setDisable(property, disable);\n    }\n    static isDisable(objectProxy, property) {\n        return this.getHandler(objectProxy).isDisable(property);\n    }\n    static setDisableAll(objectProxy, disable) {\n        this.getHandler(objectProxy).setDisableAll(disable);\n    }\n    static isDisableAll(objectProxy) {\n        return this.getHandler(objectProxy).isDisableAll();\n    }\n    static focus(objectProxy, property) {\n        this.getHandler(objectProxy).focus(property);\n    }\n}\n//# sourceMappingURL=ObjectProxy.js.map","import { DataElementFactory } from \"./DataElementFactory\";\nexport class CustomElementFactory extends DataElementFactory {\n    createElement(htmlElement, bindData, context) {\n        return this.doCreateElement(htmlElement, bindData, context);\n    }\n}\n//# sourceMappingURL=CustomElementFactory.js.map","import { DataElementFactory } from \"./DataElementFactory\";\nimport { ObjectElement } from \"./ObjectElement\";\nexport class ObjectElementFactory extends DataElementFactory {\n    createElement(htmlElement, bindData, context) {\n        return new ObjectElement(htmlElement, bindData, context);\n    }\n}\n//# sourceMappingURL=ObjectElementFactory.js.map","import { ArrayElementFactory } from \"./ArrayElementFactory\";\nimport { CustomElementFactory } from \"./CustomElementFactory\";\nimport { ObjectElementFactory } from \"./ObjectElementFactory\";\nexport class DataElementRegistry {\n    static register(tagName, elementFactory) {\n        if (elementFactory instanceof ArrayElementFactory) {\n            this.arrayElementFactories.set(tagName, elementFactory);\n        }\n        else if (elementFactory instanceof ObjectElementFactory) {\n            this.objectElementFactories.set(tagName, elementFactory);\n        }\n        else if (elementFactory instanceof CustomElementFactory) {\n            this.customElementFactories.set(tagName, elementFactory);\n        }\n        // register custom html element\n        if (tagName.includes('-')) {\n            globalThis.customElements.define(tagName, class extends HTMLElement {\n            });\n        }\n    }\n    static getFactory(htmlElement, bindData, context) {\n        let tagName = htmlElement.tagName.toLowerCase();\n        // custom element\n        if (this.customElementFactories.has(tagName)) {\n            return this.customElementFactories.get(tagName);\n        }\n        // array element\n        if (Array.isArray(bindData)) {\n            if (this.arrayElementFactories.has(tagName)) {\n                return this.arrayElementFactories.get(tagName);\n            }\n            return this.defaultArrayElementFactory;\n        }\n        // object element\n        else {\n            if (this.objectElementFactories.has(tagName)) {\n                return this.objectElementFactories.get(tagName);\n            }\n            return this.defaultObjectElementFactory;\n        }\n    }\n}\nDataElementRegistry.defaultObjectElementFactory = new ObjectElementFactory();\nDataElementRegistry.defaultArrayElementFactory = new ArrayElementFactory();\nDataElementRegistry.objectElementFactories = new Map();\nDataElementRegistry.arrayElementFactories = new Map();\nDataElementRegistry.customElementFactories = new Map();\n//# sourceMappingURL=DataElementRegistry.js.map","import { findVariable, getElementAttribute, getElementQuerySelector, hasElementAttribute, setElementAttribute } from \"./common\";\nimport { DataElementRegistry } from \"./DataElementRegistry\";\nexport class Initializer {\n    static initialize(container, context, index) {\n        // scan DOM tree\n        container.querySelectorAll(getElementQuerySelector()).forEach(element => {\n            var _a, _b;\n            // if (element instanceof HTMLElement) {\n            const htmlElement = element;\n            if (!hasElementAttribute(htmlElement, 'id')) {\n                try {\n                    let bindName = getElementAttribute(htmlElement, 'bind');\n                    let bindData = findVariable(context, bindName);\n                    (_b = (_a = DataElementRegistry.getFactory(htmlElement, bindData, context)) === null || _a === void 0 ? void 0 : _a.createElement(htmlElement, bindData, context)) === null || _b === void 0 ? void 0 : _b.render();\n                    // index\n                    if (index !== undefined) {\n                        setElementAttribute(htmlElement, \"index\", index.toString());\n                    }\n                }\n                catch (e) {\n                    console.error(e, htmlElement, container, JSON.stringify(context));\n                }\n            }\n            // }\n        });\n    }\n}\n//# sourceMappingURL=Initializer.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { getElementAttribute, markInitialized, runExecuteCode, runIfCode, setElementAttribute } from \"./common\";\nimport { DataElement } from \"./DataElement\";\nimport { ObjectProxy } from \"./ObjectProxy\";\nimport { Initializer } from \"./Initializer\";\nimport { ArrayHandler } from \"./ArrayHandler\";\nimport { ItemSelectEvent } from \"./event/ItemSelectEvent\";\nimport { ItemMoveEvent } from \"./event/ItemMoveEvent\";\nexport class ArrayElement extends DataElement {\n    constructor(htmlElement, bindData, context) {\n        super(htmlElement.cloneNode(true), bindData, context);\n        this.editable = false;\n        this.slot = document.createElement('slot');\n        this.itemHtmlElements = [];\n        // attributes\n        this.loop = getElementAttribute(htmlElement, 'loop');\n        this.hierarchy = getElementAttribute(htmlElement, 'hierarchy');\n        this.editable = (getElementAttribute(htmlElement, 'editable') === 'true');\n        this.selectedItemClass = getElementAttribute(htmlElement, 'selected-item-class');\n        // replace with slot for position\n        htmlElement.replaceWith(this.slot);\n        // mark initialized (not using after clone as templates)\n        markInitialized(htmlElement);\n    }\n    render() {\n        var _a;\n        let arrayProxy = this.getBindData();\n        // reset row elements\n        this.itemHtmlElements.forEach(rowElement => {\n            rowElement.parentNode.removeChild(rowElement);\n        });\n        this.itemHtmlElements.length = 0;\n        // loop\n        if (this.loop) {\n            let loopArgs = this.loop.split(',');\n            let itemName = loopArgs[0].trim();\n            let statusName = (_a = loopArgs[1]) === null || _a === void 0 ? void 0 : _a.trim();\n            // hierarchy loop\n            if (this.hierarchy) {\n                let hierarchyArray = this.hierarchy.split(',');\n                let idName = hierarchyArray[0];\n                let parentIdName = hierarchyArray[1];\n                //let index = -1;\n                const _this = this;\n                // visit function\n                let visit = function (array, parentId, depth) {\n                    for (let index = 0; index < array.length; index++) {\n                        const object = array[index];\n                        if (object[parentIdName] === parentId) {\n                            // context\n                            let context = Object.assign({}, _this.getContext());\n                            context[itemName] = object;\n                            context[statusName] = new ObjectProxy({\n                                index: index,\n                                count: index + 1,\n                                size: arrayProxy.length,\n                                first: (index === 0),\n                                last: (arrayProxy.length == index + 1),\n                                depth: depth\n                            });\n                            // create row element\n                            _this.createItemHtmlElement(index, object, context);\n                            // visit child elements\n                            let id = object[idName];\n                            visit(array, id, depth + 1);\n                        }\n                    }\n                };\n                // start visit\n                visit(arrayProxy, null, 0);\n            }\n            // default loop\n            else {\n                // normal\n                for (let index = 0; index < arrayProxy.length; index++) {\n                    // element data\n                    let object = arrayProxy[index];\n                    // context\n                    let context = Object.assign({}, this.getContext());\n                    context[itemName] = object;\n                    context[statusName] = new ObjectProxy({\n                        index: index,\n                        count: index + 1,\n                        size: arrayProxy.length,\n                        first: (index === 0),\n                        last: (arrayProxy.length == index + 1)\n                    });\n                    // create row element\n                    this.createItemHtmlElement(index, object, context);\n                }\n            }\n        }\n        // not loop\n        else {\n            // initialize\n            let itemHtmlElement = this.getHtmlElement().cloneNode(true);\n            let context = Object.assign({}, this.getContext());\n            Initializer.initialize(itemHtmlElement, this.getContext());\n            this.itemHtmlElements.push(itemHtmlElement);\n            // append to slot\n            this.slot.appendChild(itemHtmlElement);\n            // check if\n            runIfCode(itemHtmlElement, context);\n            // execute script\n            runExecuteCode(itemHtmlElement, context);\n        }\n    }\n    createItemHtmlElement(index, object, context) {\n        // clones row elements\n        let itemHtmlElement = this.getHtmlElement().cloneNode(true);\n        // adds embedded attribute\n        setElementAttribute(itemHtmlElement, 'index', index.toString());\n        // editable\n        let _this = this;\n        if (this.editable) {\n            itemHtmlElement.setAttribute('draggable', 'true');\n            itemHtmlElement.addEventListener('dragstart', function (e) {\n                let fromIndex = getElementAttribute(this, 'index');\n                e.dataTransfer.setData(\"text\", fromIndex);\n            });\n            itemHtmlElement.addEventListener('dragover', function (e) {\n                e.preventDefault();\n                e.stopPropagation();\n            });\n            itemHtmlElement.addEventListener('drop', function (e) {\n                return __awaiter(this, void 0, void 0, function* () {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    let fromIndex = parseInt(e.dataTransfer.getData('text'));\n                    let toIndex = parseInt(getElementAttribute(this, 'index'));\n                    let itemMoveEvent = new ItemMoveEvent(_this, fromIndex, toIndex);\n                    _this.notifyObservers(itemMoveEvent);\n                });\n            });\n        }\n        // initializes row element\n        Initializer.initialize(itemHtmlElement, context, index);\n        this.itemHtmlElements.push(itemHtmlElement);\n        // insert into slot\n        this.slot.appendChild(itemHtmlElement);\n        // check if clause\n        runIfCode(itemHtmlElement, context);\n        // execute script\n        runExecuteCode(itemHtmlElement, context);\n        // selectable\n        itemHtmlElement.addEventListener('click', e => {\n            // selected class\n            if (this.selectedItemClass) {\n                this.itemHtmlElements.forEach(element => {\n                    element.classList.remove(this.selectedItemClass);\n                });\n                e.currentTarget.classList.add(this.selectedItemClass);\n                e.stopPropagation();\n            }\n            // trigger row select event\n            let rowSelectEvent = new ItemSelectEvent(this, index);\n            this.notifyObservers(rowSelectEvent);\n        });\n    }\n    update(observable, event) {\n        console.debug('ArrayElement.update', observable, event);\n        if (observable instanceof ArrayHandler) {\n            // row select event\n            if (event instanceof ItemSelectEvent) {\n                if (this.selectedItemClass) {\n                    this.itemHtmlElements.forEach(el => el.classList.remove(this.selectedItemClass));\n                    let index = event.getIndex();\n                    if (index >= 0) {\n                        this.itemHtmlElements.forEach(itemHtmlElement => {\n                            if (itemHtmlElement.dataset.duiceIndex === event.getIndex().toString()) {\n                                itemHtmlElement.classList.add(this.selectedItemClass);\n                            }\n                        });\n                    }\n                }\n                return;\n            }\n            // render\n            this.render();\n        }\n    }\n}\n//# sourceMappingURL=ArrayElement.js.map","import { DataElementFactory } from \"./DataElementFactory\";\nimport { ArrayElement } from \"./ArrayElement\";\nexport class ArrayElementFactory extends DataElementFactory {\n    createElement(htmlElement, bindData, context) {\n        return new ArrayElement(htmlElement, bindData, context);\n    }\n}\n//# sourceMappingURL=ArrayElementFactory.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport class Dialog {\n    constructor(dialogElement) {\n        this.dialogElement = dialogElement;\n        let _this = this;\n        // dialog fixed style\n        this.dialogElement.style.position = 'absolute';\n        this.dialogElement.style.left = '0';\n        this.dialogElement.style.right = '0';\n        // header\n        this.header = document.createElement('span');\n        this.dialogElement.appendChild(this.header);\n        this.header.style.display = 'block';\n        this.header.style.position = 'absolute';\n        this.header.style.left = '0';\n        this.header.style.top = '0';\n        this.header.style.width = '100%';\n        this.header.style.height = '1rem';\n        this.header.style.cursor = 'pointer';\n        // drag\n        this.dialogElement.style.margin = '0px';\n        this.header.onmousedown = function (event) {\n            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;\n            pos3 = event.clientX;\n            pos4 = event.clientY;\n            window.document.onmouseup = function (event) {\n                window.document.onmousemove = null;\n                window.document.onmouseup = null;\n            };\n            window.document.onmousemove = function (event) {\n                pos1 = pos3 - event.clientX;\n                pos2 = pos4 - event.clientY;\n                pos3 = event.clientX;\n                pos4 = event.clientY;\n                _this.dialogElement.style.left = (_this.dialogElement.offsetLeft - pos1) + 'px';\n                _this.dialogElement.style.top = (_this.dialogElement.offsetTop - pos2) + 'px';\n            };\n        };\n        // creates close button\n        this.closeButton = document.createElement('span');\n        this.closeButton.appendChild(document.createTextNode('X'));\n        this.closeButton.style.position = 'absolute';\n        this.closeButton.style.top = '5px';\n        this.closeButton.style.right = '5px';\n        this.closeButton.style.cursor = 'pointer';\n        this.closeButton.style.width = '16px';\n        this.closeButton.style.height = '16px';\n        this.closeButton.addEventListener('click', event => {\n            _this.hide();\n            _this.close();\n        });\n        this.dialogElement.appendChild(this.closeButton);\n        // on resize event\n        window.addEventListener('resize', function (event) {\n            _this.moveToCenterPosition();\n        });\n    }\n    onOpening(listener) {\n        this.openingListener = listener;\n        return this;\n    }\n    onOpened(listener) {\n        this.openedListener = listener;\n        return this;\n    }\n    onClosing(listener) {\n        this.closingListener = listener;\n        return this;\n    }\n    onClosed(listener) {\n        this.closedListener = listener;\n        return this;\n    }\n    moveToCenterPosition() {\n        let computedStyle = window.getComputedStyle(this.dialogElement);\n        let computedWidth = parseInt(computedStyle.getPropertyValue('width').replace(/px/gi, ''));\n        let computedHeight = parseInt(computedStyle.getPropertyValue('height').replace(/px/gi, ''));\n        let scrollX = window.scrollX;\n        let scrollY = window.scrollY;\n        this.dialogElement.style.left = Math.max(0, window.innerWidth / 2 - computedWidth / 2) + scrollX + 'px';\n        this.dialogElement.style.top = Math.max(0, window.innerHeight / 3 - computedHeight / 3) + scrollY + 'px';\n    }\n    getDialogElement() {\n        return this.dialogElement;\n    }\n    show() {\n        // saves current scroll position\n        let scrollX = window.scrollX;\n        let scrollY = window.scrollY;\n        // show dialog modal\n        this.dialogElement.style.opacity = '0';\n        window.document.body.appendChild(this.dialogElement);\n        this.dialogElement.showModal();\n        // restore previous scroll position\n        window.scrollTo(scrollX, scrollY);\n        // adjusting position\n        this.moveToCenterPosition();\n        // fade in\n        let _this = this;\n        (function fade() {\n            let val = parseFloat(_this.dialogElement.style.opacity);\n            if (!((val += .1) > 1)) {\n                _this.dialogElement.style.opacity = String(val);\n                requestAnimationFrame(fade);\n            }\n        })();\n    }\n    hide() {\n        // closes modal\n        this.dialogElement.close();\n    }\n    open() {\n        return __awaiter(this, void 0, void 0, function* () {\n            // opening listener\n            if (this.openingListener) {\n                if (this.openingListener.call(this) == false) {\n                    return;\n                }\n            }\n            // show modal\n            this.show();\n            // opened listener\n            if (this.openedListener) {\n                this.openedListener.call(this);\n            }\n            // creates promise\n            let _this = this;\n            this.promise = new Promise(function (resolve, reject) {\n                _this.promiseResolve = resolve;\n                _this.promiseReject = reject;\n            });\n            return this.promise;\n        });\n    }\n    close(...args) {\n        // closing listener\n        if (this.closingListener) {\n            if (this.closingListener.call(this) == false) {\n                return;\n            }\n        }\n        // closed listener\n        if (this.closedListener) {\n            this.closedListener.call(this);\n        }\n        // resolve\n        this.hide();\n        this.promiseResolve(...args);\n    }\n}\n//# sourceMappingURL=Dialog.js.map","import { Initializer } from \"./Initializer\";\n// export class\nexport { Configuration } from \"./Configuration\";\nexport { Initializer } from \"./Initializer\";\nexport { ArrayProxy } from \"./ArrayProxy\";\nexport { ObjectProxy } from \"./ObjectProxy\";\nexport { DataElementRegistry } from \"./DataElementRegistry\";\nexport { ObjectElement } from \"./ObjectElement\";\nexport { ObjectElementFactory } from \"./ObjectElementFactory\";\nexport { ArrayElement } from \"./ArrayElement\";\nexport { ArrayElementFactory } from \"./ArrayElementFactory\";\nexport { CustomElement } from \"./CustomElement\";\nexport { CustomElementFactory } from \"./CustomElementFactory\";\nexport { Dialog } from \"./dialog/Dialog\";\nexport { AlertDialog } from \"./dialog/AlertDialog\";\nexport { ConfirmDialog } from \"./dialog/ConfirmDialog\";\nexport { PromptDialog } from \"./dialog/PromptDialog\";\nexport { TabFolder } from \"./tab/TabFolder\";\nexport { TabItem } from \"./tab/TabItem\";\nexport * from \"./common\";\n//  listens DOMContentLoaded event\nif (globalThis.document) {\n    // initialize elements\n    document.addEventListener(\"DOMContentLoaded\", event => {\n        Initializer.initialize(document.documentElement, {});\n    });\n}\n//# sourceMappingURL=index.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { ObjectElement } from \"../ObjectElement\";\nimport { getElementAttribute } from \"../common\";\nimport { PropertyChangeEvent } from \"../event/PropertyChangeEvent\";\nexport class ImgElement extends ObjectElement {\n    constructor(element, bindData, context) {\n        super(element, bindData, context);\n        this.editable = false;\n        this.closeButtonImg = 'data:image/svg+xml;base64,' + window.btoa('<svg viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><g id=\"SVGRepo_bgCarrier\" stroke-width=\"0\"></g><g id=\"SVGRepo_tracerCarrier\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></g><g id=\"SVGRepo_iconCarrier\"> <path opacity=\"0.4\" d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" fill=\"#292D32\"></path> <path d=\"M13.0594 12.0001L15.3594 9.70011C15.6494 9.41011 15.6494 8.93011 15.3594 8.64011C15.0694 8.35011 14.5894 8.35011 14.2994 8.64011L11.9994 10.9401L9.69937 8.64011C9.40937 8.35011 8.92937 8.35011 8.63938 8.64011C8.34938 8.93011 8.34938 9.41011 8.63938 9.70011L10.9394 12.0001L8.63938 14.3001C8.34938 14.5901 8.34938 15.0701 8.63938 15.3601C8.78938 15.5101 8.97937 15.5801 9.16937 15.5801C9.35937 15.5801 9.54937 15.5101 9.69937 15.3601L11.9994 13.0601L14.2994 15.3601C14.4494 15.5101 14.6394 15.5801 14.8294 15.5801C15.0194 15.5801 15.2094 15.5101 15.3594 15.3601C15.6494 15.0701 15.6494 14.5901 15.3594 14.3001L13.0594 12.0001Z\" fill=\"#292D32\"></path> </g></svg>');\n        this.originSrc = String(this.getHtmlElement().src);\n        // editable\n        this.editable = (getElementAttribute(this.getHtmlElement(), 'editable') === 'true');\n        if (this.editable) {\n            // add click event listener\n            this.getHtmlElement().style.cursor = 'pointer';\n            this.getHtmlElement().addEventListener('click', event => {\n                this.changeImage();\n            });\n            // create clear button\n            this.clearButton = document.createElement('img');\n            this.clearButton.src = this.closeButtonImg;\n            this.clearButton.style.cursor = 'pointer';\n            this.clearButton.style.width = '16px';\n            this.clearButton.style.height = '16px';\n            this.clearButton.addEventListener('mouseout', event => {\n                this.hideClearImageButton();\n            }, true);\n            this.clearButton.addEventListener('click', event => {\n                this.clearImage();\n            });\n            // mouse over\n            this.getHtmlElement().addEventListener('mouseover', event => {\n                this.showClearImageButton();\n            }, true);\n            // mouse over\n            this.getHtmlElement().addEventListener('mouseout', event => {\n                // related target is overlay button\n                if (event.relatedTarget === this.clearButton) {\n                    return;\n                }\n                this.hideClearImageButton();\n            }, true);\n        }\n        // size\n        let size = getElementAttribute(this.getHtmlElement(), 'size');\n        if (size) {\n            let sizeArgs = size.split(',');\n            this.width = parseInt(sizeArgs[0].trim());\n            this.height = parseInt(sizeArgs[1].trim());\n        }\n    }\n    showClearImageButton() {\n        this.getHtmlElement().parentNode.insertBefore(this.clearButton, this.getHtmlElement().nextSibling);\n        this.clearButton.style.position = 'absolute';\n        this.clearButton.style.zIndex = '100';\n    }\n    hideClearImageButton() {\n        this.getHtmlElement().parentNode.removeChild(this.clearButton);\n    }\n    clearImage() {\n        if (this.originSrc) {\n            this.getHtmlElement().src = this.originSrc;\n        }\n        else {\n            this.getHtmlElement().src = null;\n        }\n        // notify observers\n        let event = new PropertyChangeEvent(this, this.getProperty(), this.getValue(), this.getIndex());\n        this.notifyObservers(event);\n    }\n    changeImage() {\n        let input = document.createElement('input');\n        input.setAttribute(\"type\", \"file\");\n        input.setAttribute(\"accept\", \"image/gif, image/jpeg, image/png\");\n        let _this = this;\n        input.addEventListener('change', function (e) {\n            let fileReader = new FileReader();\n            if (this.files && this.files[0]) {\n                fileReader.addEventListener(\"load\", (e) => __awaiter(this, void 0, void 0, function* () {\n                    let image = e.target.result;\n                    let value;\n                    if (_this.width && _this.height) {\n                        value = yield _this.convertImage(image, _this.width, _this.height);\n                    }\n                    else {\n                        value = yield _this.convertImage(image);\n                    }\n                    _this.setValue(value);\n                    // notify observers\n                    let event = new PropertyChangeEvent(_this, _this.getProperty(), _this.getValue(), _this.getIndex());\n                    _this.notifyObservers(event);\n                }));\n                fileReader.readAsDataURL(this.files[0]);\n            }\n            e.preventDefault();\n            e.stopPropagation();\n        });\n        input.click();\n    }\n    convertImage(dataUrl, width, height) {\n        return new Promise(function (resolve, reject) {\n            try {\n                let canvas = document.createElement(\"canvas\");\n                let ctx = canvas.getContext(\"2d\");\n                let image = new Image();\n                image.onload = function () {\n                    if (width && height) {\n                        canvas.width = width;\n                        canvas.height = height;\n                        ctx.drawImage(image, 0, 0, width, height);\n                    }\n                    else {\n                        canvas.width = image.naturalWidth;\n                        canvas.height = image.naturalHeight;\n                        ctx.drawImage(image, 0, 0);\n                    }\n                    let dataUrl = canvas.toDataURL(\"image/png\");\n                    resolve(dataUrl);\n                };\n                image.src = dataUrl;\n            }\n            catch (e) {\n                reject(e);\n            }\n        });\n    }\n    setValue(value) {\n        if (value) {\n            this.getHtmlElement().src = value;\n        }\n        else {\n            this.getHtmlElement().src = this.originSrc;\n        }\n    }\n    getValue() {\n        let value = this.getHtmlElement().src;\n        if (value === this.originSrc) {\n            return null;\n        }\n        else {\n            return value;\n        }\n    }\n    setReadonly(readonly) {\n        this.getHtmlElement().style.pointerEvents = (readonly ? 'none' : 'unset');\n    }\n    setDisable(disable) {\n        this.getHtmlElement().style.pointerEvents = (disable ? 'none' : 'unset');\n    }\n}\n//# sourceMappingURL=ImgElement.js.map","import { ObjectElementFactory } from \"../ObjectElementFactory\";\nimport { DataElementRegistry } from \"../DataElementRegistry\";\nimport { ImgElement } from \"./ImgElement\";\nexport class ImgElementFactory extends ObjectElementFactory {\n    createElement(element, bindData, context) {\n        return new ImgElement(element, bindData, context);\n    }\n}\n(() => {\n    // register factory instance\n    DataElementRegistry.register('img', new ImgElementFactory());\n})();\n//# sourceMappingURL=ImgElementFactory.js.map","import { ObjectElement } from \"../ObjectElement\";\nimport { PropertyChangeEvent } from \"../event/PropertyChangeEvent\";\nexport class InputElement extends ObjectElement {\n    constructor(element, bindData, context) {\n        super(element, bindData, context);\n        // adds change listener\n        this.getHtmlElement().addEventListener('change', e => {\n            let event = new PropertyChangeEvent(this, this.getProperty(), this.getValue(), this.getIndex());\n            this.notifyObservers(event);\n        }, true);\n        // turn off autocomplete\n        this.getHtmlElement().setAttribute('autocomplete', 'off');\n    }\n    setValue(value) {\n        if (value) {\n            value = this.getFormat() ? this.getFormat().format(value) : value;\n        }\n        else {\n            value = '';\n        }\n        this.getHtmlElement().value = value;\n    }\n    getValue() {\n        let value = this.getHtmlElement().value;\n        if (value) {\n            value = this.getFormat() ? this.getFormat().parse(value) : value;\n        }\n        else {\n            value = null;\n        }\n        return value;\n    }\n    setReadonly(readonly) {\n        this.getHtmlElement().readOnly = readonly;\n    }\n    setDisable(disable) {\n        if (disable) {\n            this.getHtmlElement().setAttribute('disabled', 'disabled');\n        }\n        else {\n            this.getHtmlElement().removeAttribute('disabled');\n        }\n    }\n    focus() {\n        this.getHtmlElement().focus();\n        return true;\n    }\n}\n//# sourceMappingURL=InputElement.js.map","import { getElementAttribute } from \"../common\";\nimport { InputElement } from \"./InputElement\";\nexport class InputCheckboxElement extends InputElement {\n    constructor(element, bindData, context) {\n        super(element, bindData, context);\n        this.trueValue = true;\n        this.falseValue = false;\n        // true false value\n        let trueValue = getElementAttribute(this.getHtmlElement(), 'true-value');\n        this.trueValue = trueValue ? trueValue : this.trueValue;\n        let falseValue = getElementAttribute(this.getHtmlElement(), 'false-value');\n        this.falseValue = falseValue ? falseValue : this.falseValue;\n    }\n    setValue(value) {\n        if (value === this.trueValue) {\n            this.getHtmlElement().checked = true;\n        }\n        else {\n            this.htmlElement.checked = false;\n        }\n    }\n    getValue() {\n        if (this.htmlElement.checked) {\n            return this.trueValue;\n        }\n        else {\n            return this.falseValue;\n        }\n    }\n    disableClick(event) {\n        event.preventDefault();\n    }\n    setReadonly(readonly) {\n        if (readonly) {\n            this.getHtmlElement().addEventListener('click', this.disableClick);\n        }\n        else {\n            this.getHtmlElement().removeEventListener('click', this.disableClick);\n        }\n    }\n}\n//# sourceMappingURL=InputCheckboxElement.js.map","import { InputElement } from \"./InputElement\";\nimport { DateFormat } from \"../format/DateFormat\";\nexport class InputDatetimeLocalElement extends InputElement {\n    constructor(element, bindData, context) {\n        super(element, bindData, context);\n        this.dateFormat = new DateFormat('yyyy-MM-ddTHH:mm');\n    }\n    setValue(value) {\n        if (value) {\n            this.getHtmlElement().value = this.dateFormat.format(value);\n        }\n        else {\n            this.getHtmlElement().value = '';\n        }\n    }\n    getValue() {\n        let value = this.getHtmlElement().value;\n        if (value) {\n            return new Date(value).toISOString();\n        }\n        else {\n            return null;\n        }\n    }\n}\n//# sourceMappingURL=InputDatetimeLocalElement.js.map","import { InputElement } from \"./InputElement\";\nexport class InputNumberElement extends InputElement {\n    constructor(element, bindData, context) {\n        super(element, bindData, context);\n        // changes type and style\n        this.getHtmlElement().removeAttribute('type');\n        this.getHtmlElement().style.textAlign = 'right';\n        // prevents invalid key press\n        this.getHtmlElement().addEventListener('keypress', event => {\n            if (/[\\d|\\.|,]/.test(event.key) === false) {\n                event.preventDefault();\n            }\n        });\n    }\n    getValue() {\n        let value = super.getValue();\n        return Number(value);\n    }\n}\n//# sourceMappingURL=InputNumberElement.js.map","import { InputElement } from \"./InputElement\";\nexport class InputRadioElement extends InputElement {\n    constructor(element, bindData, context) {\n        super(element, bindData, context);\n    }\n    setValue(value) {\n        this.getHtmlElement().checked = (this.getHtmlElement().value === value);\n    }\n    getValue() {\n        return this.getHtmlElement().value;\n    }\n    setReadonly(readonly) {\n        if (readonly) {\n            this.getHtmlElement().style.pointerEvents = 'none';\n        }\n        else {\n            this.getHtmlElement().style.pointerEvents = '';\n        }\n    }\n}\n//# sourceMappingURL=InputRadioElement.js.map","import { ObjectElementFactory } from \"../ObjectElementFactory\";\nimport { InputElement } from \"./InputElement\";\nimport { InputNumberElement } from \"./InputNumberElement\";\nimport { InputCheckboxElement } from \"./InputCheckboxElement\";\nimport { InputDatetimeLocalElement } from \"./InputDatetimeLocalElement\";\nimport { DataElementRegistry } from \"../DataElementRegistry\";\nimport { InputRadioElement } from \"./InputRadioElement\";\nexport class InputElementFactory extends ObjectElementFactory {\n    createElement(element, bindData, context) {\n        let type = element.getAttribute('type');\n        switch (type) {\n            case 'number':\n                return new InputNumberElement(element, bindData, context);\n            case 'checkbox':\n                return new InputCheckboxElement(element, bindData, context);\n            case 'radio':\n                return new InputRadioElement(element, bindData, context);\n            case 'datetime-local':\n                return new InputDatetimeLocalElement(element, bindData, context);\n            default:\n                return new InputElement(element, bindData, context);\n        }\n    }\n}\n(() => {\n    // register factory instance\n    DataElementRegistry.register('input', new InputElementFactory());\n})();\n//# sourceMappingURL=InputElementFactory.js.map","import { ObjectElement } from \"../ObjectElement\";\nimport { findVariable, getElementAttribute } from \"../common\";\nimport { PropertyChangeEvent } from \"../event/PropertyChangeEvent\";\nimport { ArrayProxy } from \"../ArrayProxy\";\nexport class SelectElement extends ObjectElement {\n    constructor(element, bindData, context) {\n        super(element, bindData, context);\n        this.defaultOptions = [];\n        // adds event listener\n        this.getHtmlElement().addEventListener('change', () => {\n            let event = new PropertyChangeEvent(this, this.getProperty(), this.getValue(), this.getIndex());\n            this.notifyObservers(event);\n        }, true);\n        // stores default option\n        for (let i = 0; i < this.getHtmlElement().options.length; i++) {\n            this.defaultOptions.push(this.getHtmlElement().options[i]);\n        }\n        // option property\n        let optionName = getElementAttribute(this.getHtmlElement(), 'option');\n        if (optionName) {\n            this.option = findVariable(this.getContext(), optionName);\n            this.optionValueProperty = getElementAttribute(this.getHtmlElement(), 'option-value-property');\n            this.optionTextProperty = getElementAttribute(this.getHtmlElement(), 'option-text-property');\n            ArrayProxy.getHandler(this.option).addObserver(this);\n            this.updateOptions();\n        }\n    }\n    updateOptions() {\n        let value = this.getHtmlElement().value;\n        this.getHtmlElement().innerHTML = '';\n        this.defaultOptions.forEach(defaultOption => {\n            this.getHtmlElement().appendChild(defaultOption);\n        });\n        this.option.forEach(data => {\n            let option = document.createElement('option');\n            option.value = data[this.optionValueProperty];\n            option.appendChild(document.createTextNode(data[this.optionTextProperty]));\n            this.getHtmlElement().appendChild(option);\n        });\n        this.getHtmlElement().value = value;\n    }\n    update(observable, dataEvent) {\n        super.update(observable, dataEvent);\n        if (this.option) {\n            this.updateOptions();\n        }\n    }\n    setValue(value) {\n        this.getHtmlElement().value = value;\n        // force select option\n        if (!value) {\n            for (let i = 0; i < this.getHtmlElement().options.length; i++) {\n                let option = this.getHtmlElement().options[i];\n                if (!option.nodeValue) {\n                    option.selected = true;\n                    break;\n                }\n            }\n        }\n    }\n    getValue() {\n        let value = this.getHtmlElement().value;\n        if (!value || value.trim().length < 1) {\n            value = null;\n        }\n        return value;\n    }\n    setReadonly(readonly) {\n        if (readonly) {\n            console.warn(\"==ok\");\n            this.getHtmlElement().style.pointerEvents = 'none';\n        }\n        else {\n            this.getHtmlElement().style.pointerEvents = '';\n        }\n    }\n    setDisable(disable) {\n        if (disable) {\n            this.getHtmlElement().setAttribute('disabled', 'disabled');\n        }\n        else {\n            this.getHtmlElement().removeAttribute('disabled');\n        }\n    }\n}\n//# sourceMappingURL=SelectElement.js.map","import { ObjectElementFactory } from \"../ObjectElementFactory\";\nimport { SelectElement } from \"./SelectElement\";\nimport { DataElementRegistry } from \"../DataElementRegistry\";\nexport class SelectElementFactory extends ObjectElementFactory {\n    createElement(element, bindData, context) {\n        return new SelectElement(element, bindData, context);\n    }\n}\n(() => {\n    // register factory instance\n    DataElementRegistry.register('select', new SelectElementFactory());\n})();\n//# sourceMappingURL=SelectElementFactory.js.map","import { ObjectElement } from \"../ObjectElement\";\nimport { PropertyChangeEvent } from \"../event/PropertyChangeEvent\";\nexport class TextareaElement extends ObjectElement {\n    constructor(element, bindData, context) {\n        super(element, bindData, context);\n        // adds change event listener\n        this.getHtmlElement().addEventListener('change', e => {\n            let event = new PropertyChangeEvent(this, this.getProperty(), this.getValue(), this.getIndex());\n            this.notifyObservers(event);\n        }, true);\n    }\n    setValue(value) {\n        if (value) {\n            this.getHtmlElement().value = value;\n        }\n        else {\n            this.getHtmlElement().value = '';\n        }\n    }\n    getValue() {\n        let value = this.getHtmlElement().value;\n        if (value != null && value.length > 0) {\n            return value;\n        }\n        else {\n            return null;\n        }\n    }\n    setReadonly(readonly) {\n        if (readonly) {\n            this.getHtmlElement().setAttribute('readonly', 'readonly');\n        }\n        else {\n            this.getHtmlElement().removeAttribute('readonly');\n        }\n    }\n    setDisable(disable) {\n        if (disable) {\n            this.getHtmlElement().setAttribute('disabled', 'disabled');\n        }\n        else {\n            this.getHtmlElement().removeAttribute('disabled');\n        }\n    }\n}\n//# sourceMappingURL=TextareaElement.js.map","import { ObjectElementFactory } from \"../ObjectElementFactory\";\nimport { TextareaElement } from \"./TextareaElement\";\nimport { DataElementRegistry } from \"../DataElementRegistry\";\nexport class TextareaElementFactory extends ObjectElementFactory {\n    createElement(element, bindData, context) {\n        return new TextareaElement(element, bindData, context);\n    }\n}\n(() => {\n    // register\n    DataElementRegistry.register('textarea', new TextareaElementFactory());\n})();\n//# sourceMappingURL=TextareaElementFactory.js.map","import { Dialog } from \"./Dialog\";\nexport class AlertDialog extends Dialog {\n    constructor(message) {\n        super(document.createElement('dialog'));\n        this.getDialogElement().style.padding = '1rem';\n        this.getDialogElement().style.minWidth = '20rem';\n        this.getDialogElement().style.textAlign = 'center';\n        // message pre\n        this.messagePre = document.createElement('pre');\n        this.messagePre.style.marginTop = '1rem';\n        this.messagePre.style.marginBottom = '1rem';\n        this.messagePre.innerHTML = message;\n        this.getDialogElement().appendChild(this.messagePre);\n        // confirm button\n        this.confirmButton = document.createElement('button');\n        this.confirmButton.appendChild(document.createTextNode('Yes'));\n        this.confirmButton.style.width = '4rem';\n        this.confirmButton.style.cursor = 'pointer';\n        this.confirmButton.addEventListener('click', event => {\n            this.confirm();\n        });\n        this.getDialogElement().appendChild(this.confirmButton);\n    }\n    open() {\n        let promise = super.open();\n        this.confirmButton.focus();\n        return promise;\n    }\n    confirm() {\n        super.close();\n        this.getDialogElement().parentNode.removeChild(this.getDialogElement());\n    }\n    close() {\n        super.close();\n        this.getDialogElement().parentNode.removeChild(this.getDialogElement());\n    }\n}\n//# sourceMappingURL=AlertDialog.js.map","import { Dialog } from \"./Dialog\";\nexport class ConfirmDialog extends Dialog {\n    constructor(message) {\n        super(document.createElement('dialog'));\n        this.getDialogElement().style.padding = '1rem';\n        this.getDialogElement().style.minWidth = '20rem';\n        this.getDialogElement().style.textAlign = 'center';\n        // message pre\n        this.messagePre = document.createElement('pre');\n        this.messagePre.style.marginTop = '1rem';\n        this.messagePre.style.marginBottom = '1rem';\n        this.messagePre.innerHTML = message;\n        this.getDialogElement().appendChild(this.messagePre);\n        // cancel button\n        this.cancelButton = document.createElement('button');\n        this.cancelButton.appendChild(document.createTextNode('No'));\n        this.cancelButton.style.width = '4rem';\n        this.cancelButton.style.cursor = 'pointer';\n        this.cancelButton.addEventListener('click', event => {\n            this.cancel();\n        });\n        this.getDialogElement().appendChild(this.cancelButton);\n        // divider\n        this.getDialogElement().appendChild(document.createTextNode(' '));\n        // confirm button\n        this.confirmButton = document.createElement('button');\n        this.confirmButton.appendChild(document.createTextNode('Yes'));\n        this.confirmButton.style.width = '4rem';\n        this.confirmButton.style.cursor = 'pointer';\n        this.confirmButton.addEventListener('click', event => {\n            this.confirm();\n        });\n        this.getDialogElement().appendChild(this.confirmButton);\n    }\n    open() {\n        let promise = super.open();\n        this.confirmButton.focus();\n        return promise;\n    }\n    close(...args) {\n        super.close(false);\n        this.getDialogElement().parentNode.removeChild(this.getDialogElement());\n    }\n    confirm() {\n        super.close(true);\n        this.getDialogElement().parentNode.removeChild(this.getDialogElement());\n    }\n    cancel() {\n        super.close(false);\n        this.getDialogElement().parentNode.removeChild(this.getDialogElement());\n    }\n}\n//# sourceMappingURL=ConfirmDialog.js.map","import { DataElement } from \"./DataElement\";\nimport { runExecuteCode, runIfCode } from \"./common\";\nimport { Initializer } from \"./Initializer\";\nimport { DataHandler } from \"./DataHandler\";\nexport class CustomElement extends DataElement {\n    constructor(htmlElement, bindData, context) {\n        super(htmlElement, bindData, context);\n    }\n    render() {\n        // do render\n        this.doRender(this.getBindData());\n        // check if\n        runIfCode(this.getHtmlElement(), this.getContext());\n        // initialize\n        Initializer.initialize(this.getHtmlElement(), this.getContext());\n        // execute script\n        runExecuteCode(this.getHtmlElement(), this.getContext());\n    }\n    update(observable, event) {\n        if (observable instanceof DataHandler) {\n            this.doUpdate(observable.getTarget());\n        }\n    }\n}\n//# sourceMappingURL=CustomElement.js.map","import { Dialog } from \"./Dialog\";\nexport class PromptDialog extends Dialog {\n    constructor(message, type) {\n        super(document.createElement('dialog'));\n        this.getDialogElement().style.padding = '1rem';\n        this.getDialogElement().style.minWidth = '20rem';\n        this.getDialogElement().style.textAlign = 'center';\n        // message pre\n        this.messagePre = document.createElement('pre');\n        this.messagePre.style.marginTop = '1rem';\n        this.messagePre.style.marginBottom = '1rem';\n        this.messagePre.innerHTML = message;\n        this.getDialogElement().appendChild(this.messagePre);\n        // prompt input\n        this.promptInput = document.createElement('input');\n        this.promptInput.style.textAlign = 'center';\n        this.promptInput.style.marginBottom = '1rem';\n        this.promptInput.style.width = '100%';\n        if (type) {\n            this.promptInput.type = type;\n        }\n        this.getDialogElement().appendChild(this.promptInput);\n        // cancel button\n        this.cancelButton = document.createElement('button');\n        this.cancelButton.appendChild(document.createTextNode('No'));\n        this.cancelButton.style.width = '4rem';\n        this.cancelButton.style.cursor = 'pointer';\n        this.cancelButton.addEventListener('click', event => {\n            this.cancel();\n        });\n        this.getDialogElement().appendChild(this.cancelButton);\n        // divider\n        this.getDialogElement().appendChild(document.createTextNode(' '));\n        // confirm button\n        this.confirmButton = document.createElement('button');\n        this.confirmButton.appendChild(document.createTextNode('Yes'));\n        this.confirmButton.style.width = '4rem';\n        this.confirmButton.style.cursor = 'pointer';\n        this.confirmButton.addEventListener('click', event => {\n            this.confirm(this.promptInput.value);\n        });\n        this.getDialogElement().appendChild(this.confirmButton);\n    }\n    open() {\n        let promise = super.open();\n        this.promptInput.focus();\n        return promise;\n    }\n    close(...args) {\n        super.close();\n        this.getDialogElement().parentNode.removeChild(this.getDialogElement());\n    }\n    confirm(value) {\n        super.close(value);\n        this.getDialogElement().parentNode.removeChild(this.getDialogElement());\n    }\n    cancel() {\n        super.close();\n        this.getDialogElement().parentNode.removeChild(this.getDialogElement());\n    }\n}\n//# sourceMappingURL=PromptDialog.js.map","export class TabFolder {\n    constructor() {\n        this.items = [];\n    }\n    addItem(item) {\n        item.setTabFolder(this);\n        item.setTabIndex(this.items.length);\n        this.items.push(item);\n    }\n    setActive(index) {\n        for (let i = 0; i < this.items.length; i++) {\n            this.items[i].setActive(i === index);\n        }\n    }\n}\n//# sourceMappingURL=TabFolder.js.map","export class TabItem {\n    constructor(button, content, listener) {\n        this.button = button;\n        this.content = content;\n        this.listener = listener;\n        // default style\n        button.style.cursor = 'pointer';\n        // add listener\n        let _this = this;\n        button.addEventListener('click', () => {\n            _this.tabFolder.setActive(_this.tabIndex);\n        });\n        // set de-active\n        this.setActive(false);\n    }\n    setTabFolder(tabFolder) {\n        this.tabFolder = tabFolder;\n    }\n    setTabIndex(tabIndex) {\n        this.tabIndex = tabIndex;\n    }\n    setActive(active) {\n        if (active) {\n            this.button.style.opacity = 'unset';\n            this.content.removeAttribute('hidden');\n            this.listener.call(this);\n        }\n        else {\n            this.button.style.opacity = '0.5';\n            this.content.setAttribute('hidden', String(true));\n        }\n    }\n}\n//# sourceMappingURL=TabItem.js.map"],"names":["DataElementFactory","Configuration","setNamespace","value","this","namespace","getNamespace","getElementQuerySelector","markInitialized","container","querySelectorAll","forEach","element","setElementAttribute","findVariable","context","name","object","Function","call","ignore","console","warn","runCode","code","htmlElement","args","values","property","push","e","error","runIfCode","ifClause","getElementAttribute","result","hidden","runExecuteCode","script","hasElementAttribute","hasAttribute","getAttribute","setAttribute","assert","condition","message","Error","Observable","constructor","observers","notifyEnabled","addObserver","observer","removeObserver","i","size","length","splice","suspendNotify","resumeNotify","notifyObservers","dataEvent","update","DataElement","bindData","_a","super","generateId","dataHandler","globalThis","Object","getOwnPropertyDescriptor","replace","c","r","Math","random","toString","getHtmlElement","getContext","getBindData","DataEvent","source","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","done","then","apply","DataHandler","readonlyAll","readonly","Set","disableAll","disable","listenerEnabled","setTarget","target","getTarget","setReadonlyAll","clear","isReadonlyAll","setReadonly","add","delete","isReadonly","has","setDisableAll","isDisableAll","setDisable","isDisable","suspendListener","resumeListener","checkListener","listener","event","StringFormat","pattern","format","encodedValue","patternChars","split","valueChars","valueCharsPosition","patternChar","parse","decodedValue","NumberFormat","scale","number","isNaN","Number","string","String","toFixed","reg","test","DateFormat","patternRex","date","Date","$1","getFullYear","padStart","getMonth","getDate","getHours","getMinutes","getSeconds","match","exec","formatString","formatIndex","index","formatLength","matchValue","substr","padEnd","fullYear","parseInt","setFullYear","yyValue","floor","monthValue","setMonth","dateValue","setDate","hoursValue","setHours","minutesValue","setMinutes","secondsValue","setSeconds","tzo","getTimezoneOffset","dif","pad","num","abs","FormatFactory","getFormat","map","arg","trim","startsWith","ObjectElement","getProperty","render","checkIf","objectHandler","ObjectProxy","getHandler","getValue","setValue","executeScript","assign","bind","bindSplit","observable","debug","ObjectHandler","innerText","getIndex","focus","PropertyChangeEvent","get","receiver","Reflect","set","propertyChangingListener","propertyChangedListener","ItemInsertEvent","items","getItems","ItemSelectEvent","ItemMoveEvent","fromIndex","toIndex","getFromIndex","getToIndex","ItemDeleteEvent","ArrayHandler","_this","includes","arguments_1","arguments","rows","insertItem","arguments_2","start","deleteCount","deleteRows","insertRows","deleteItem","ArrayElement","selectedItemIndex","arrayProxy","arrayHandler","ArrayProxy","proxyTarget","objectProxy","rowInsertingListener","rowInsertedListener","sliceBegin","sliceEnd","slice","rowDeletingListener","spliceStart","spliceDeleteCount","rowDeletedListener","appendItem","selectItem","rowSelectEvent","getSelectedItemIndex","Array","array","isProxy","isArray","Proxy","setHandler","onPropertyChanging","onPropertyChanged","hasOwnProperty","defineProperty","writable","handler","save","origin","JSON","stringify","reset","onRowInserting","onRowInserted","onRowDeleting","onRowDeleted","keys","CustomElementFactory","createElement","doCreateElement","ObjectElementFactory","DataElementRegistry","register","tagName","elementFactory","ArrayElementFactory","arrayElementFactories","objectElementFactories","customElementFactories","customElements","define","HTMLElement","getFactory","toLowerCase","defaultArrayElementFactory","defaultObjectElementFactory","Map","Initializer","initialize","_b","bindName","undefined","cloneNode","editable","slot","document","itemHtmlElements","loop","hierarchy","selectedItemClass","replaceWith","rowElement","parentNode","removeChild","loopArgs","itemName","statusName","hierarchyArray","idName","parentIdName","visit","parentId","depth","count","first","last","createItemHtmlElement","id","itemHtmlElement","appendChild","addEventListener","dataTransfer","setData","preventDefault","stopPropagation","getData","itemMoveEvent","classList","remove","currentTarget","el","dataset","duiceIndex","Dialog","dialogElement","style","position","left","right","header","display","top","width","height","cursor","margin","onmousedown","pos1","pos2","pos3","pos4","clientX","clientY","window","onmouseup","onmousemove","offsetLeft","offsetTop","closeButton","createTextNode","hide","close","moveToCenterPosition","onOpening","openingListener","onOpened","openedListener","onClosing","closingListener","onClosed","closedListener","computedStyle","getComputedStyle","computedWidth","getPropertyValue","computedHeight","scrollX","scrollY","max","innerWidth","innerHeight","getDialogElement","show","opacity","body","showModal","scrollTo","fade","val","parseFloat","requestAnimationFrame","open","promise","promiseResolve","promiseReject","documentElement","ImgElement","closeButtonImg","btoa","originSrc","src","changeImage","clearButton","hideClearImageButton","clearImage","showClearImageButton","relatedTarget","sizeArgs","insertBefore","nextSibling","zIndex","input","fileReader","FileReader","files","image","convertImage","readAsDataURL","click","dataUrl","canvas","ctx","Image","onload","drawImage","naturalWidth","naturalHeight","toDataURL","pointerEvents","ImgElementFactory","InputElement","readOnly","removeAttribute","InputCheckboxElement","trueValue","falseValue","checked","disableClick","removeEventListener","InputDatetimeLocalElement","dateFormat","toISOString","InputNumberElement","textAlign","key","InputRadioElement","InputElementFactory","SelectElement","defaultOptions","options","optionName","option","optionValueProperty","optionTextProperty","updateOptions","innerHTML","defaultOption","data","nodeValue","selected","SelectElementFactory","TextareaElement","TextareaElementFactory","padding","minWidth","messagePre","marginTop","marginBottom","confirmButton","confirm","cancelButton","cancel","doRender","doUpdate","type","promptInput","addItem","item","setTabFolder","setTabIndex","setActive","button","content","tabFolder","tabIndex","active"],"mappings":"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"}