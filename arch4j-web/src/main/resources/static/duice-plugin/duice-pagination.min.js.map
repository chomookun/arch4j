{"version":3,"file":"duice-pagination.min.js","sources":["PaginationElement.js","PaginationElementFactory.js"],"sourcesContent":["import { Configuration, CustomElement } from \"duice\";\nimport { getElementAttribute } from \"duice\";\n/**\n * Pagination Element\n */\nexport class PaginationElement extends CustomElement {\n    /**\n     * Constructor\n     * @param htmlElement html element\n     * @param bindData bind data\n     * @param context context\n     */\n    constructor(htmlElement, bindData, context) {\n        super(htmlElement, bindData, context);\n        this.prevContent = '<';\n        this.nextContent = '>';\n        this.pageNumberSize = 10;\n        // attributes\n        this.pageProperty = getElementAttribute(htmlElement, 'page-property');\n        this.sizeProperty = getElementAttribute(htmlElement, 'size-property');\n        this.totalProperty = getElementAttribute(htmlElement, 'total-property');\n        this.onclick = new Function(getElementAttribute(htmlElement, 'onclick'));\n        // optional\n        this.pageNumberSize = Number(getElementAttribute(htmlElement, 'page-number-size') || this.pageNumberSize);\n        this.prevContent = getElementAttribute(htmlElement, 'prev-content') || this.prevContent;\n        this.nextContent = getElementAttribute(htmlElement, 'next-content') || this.nextContent;\n    }\n    /**\n     * Do render\n     * @param object\n     */\n    doRender(object) {\n        // page,size,count\n        let page = Number(object[this.pageProperty]);\n        let size = Number(object[this.sizeProperty]);\n        let total = Number(object[this.totalProperty]);\n        // calculate page\n        let totalPage = Math.ceil(total / size);\n        let startPageIndex = Math.floor(page / this.pageNumberSize) * this.pageNumberSize;\n        let endPageIndex = Math.min(startPageIndex + (this.pageNumberSize - 1), totalPage - 1);\n        endPageIndex = Math.max(endPageIndex, 0);\n        // prev\n        let prev = document.createElement('span');\n        prev.innerHTML = this.prevContent;\n        prev.classList.add(`${Configuration.getNamespace()}-pagination__prev`);\n        prev.dataset.page = String(Math.max(startPageIndex - this.pageNumberSize, 0));\n        prev.addEventListener('click', () => {\n            this.onclick.call(prev);\n        });\n        if (page < this.pageNumberSize) {\n            prev.classList.add(`${Configuration.getNamespace()}-pagination__prev--disable`);\n        }\n        // pages\n        let pageable = document.createElement('ul');\n        pageable.classList.add(`${Configuration.getNamespace()}-pagination-pageable`);\n        for (let index = startPageIndex; index <= endPageIndex; index++) {\n            let item = document.createElement('li');\n            item.appendChild(document.createTextNode(String(index + 1)));\n            item.dataset.page = String(index);\n            item.classList.add(`${Configuration.getNamespace()}-pagination__pageable-item`);\n            if (index === page) {\n                item.classList.add(`${Configuration.getNamespace()}-pagination__pageable-item--active`);\n            }\n            item.addEventListener('click', () => {\n                this.onclick.call(item);\n            });\n            pageable.appendChild(item);\n        }\n        // next\n        let next = document.createElement('span');\n        next.innerHTML = this.nextContent;\n        next.classList.add(`${Configuration.getNamespace()}-pagination__next`);\n        next.dataset.page = String(Math.min(endPageIndex + 1, totalPage));\n        next.addEventListener('click', () => {\n            this.onclick.call(next);\n        });\n        if (endPageIndex >= (totalPage - 1)) {\n            next.classList.add(`${Configuration.getNamespace()}-pagination__next--disable`);\n        }\n        // appends to container\n        this.getHtmlElement().innerHTML = '';\n        this.getHtmlElement().appendChild(this.createStyle());\n        this.getHtmlElement().appendChild(prev);\n        this.getHtmlElement().appendChild(pageable);\n        this.getHtmlElement().appendChild(next);\n        // moves to current page\n        const activeItem = this.getHtmlElement().querySelector('.duice-pagination__pageable-item--active');\n        activeItem === null || activeItem === void 0 ? void 0 : activeItem.scrollIntoView({\n            behavior: 'instant',\n            inline: 'center',\n            block: 'nearest'\n        });\n    }\n    /**\n     * Updates element\n     * @param object\n     */\n    doUpdate(object) {\n        this.render();\n    }\n    /**\n     * Creates style\n     */\n    createStyle() {\n        let style = document.createElement('style');\n        style.innerHTML = `\n            ${Configuration.getNamespace()}-pagination {\n                display: inline-flex;\n                gap: 0.5em;\n                overflow: hidden;\n            }\n      \n            .${Configuration.getNamespace()}-pagination__prev {\n                cursor: pointer;\n            }\n            .${Configuration.getNamespace()}-pagination__prev--disable {\n                pointer-events: none;\n            }\n            .${Configuration.getNamespace()}-pagination__next {\n                cursor: pointer;\n            }\n            .${Configuration.getNamespace()}-pagination__next--disable {\n                pointer-events: none;\n            }\n            .${Configuration.getNamespace()}-pagination-pageable {\n                list-style: none;\n                display: flex;\n                gap: 0.5em;\n                padding-left: 0;\n                margin: 0;\n                overflow-x: scroll;\n            }\n            .${Configuration.getNamespace()}-pagination__pageable-item {\n                cursor: pointer;\n            } \n            .${Configuration.getNamespace()}-pagination__pageable-item--active {\n                font-weight: bold;\n                text-decoration: underline;\n                pointer-events: none;\n            }\n            .${Configuration.getNamespace()}-pagination__pageable-item--disable {\n                pointer-events: none;\n            }\n        `;\n        return style;\n    }\n}\n//# sourceMappingURL=PaginationElement.js.map","import { Configuration, CustomElementFactory } from \"duice\";\nimport { ElementRegistry } from \"duice\";\nimport { PaginationElement } from \"./PaginationElement\";\n/**\n * Pagination Element Factory\n */\nexport class PaginationElementFactory extends CustomElementFactory {\n    /**\n     * Creates element\n     * @param htmlElement html element\n     * @param bindData bind data\n     * @param context context\n     */\n    doCreateElement(htmlElement, bindData, context) {\n        return new PaginationElement(htmlElement, bindData, context);\n    }\n}\n/**\n * Static block\n */\n(() => {\n    // register\n    ElementRegistry.register(`${Configuration.getNamespace()}-pagination`, new PaginationElementFactory());\n})();\n//# sourceMappingURL=PaginationElementFactory.js.map"],"names":["PaginationElement","CustomElement","constructor","htmlElement","bindData","context","super","this","prevContent","nextContent","pageNumberSize","pageProperty","getElementAttribute","sizeProperty","totalProperty","onclick","Function","Number","doRender","object","page","size","total","totalPage","Math","ceil","startPageIndex","floor","endPageIndex","min","max","prev","document","createElement","innerHTML","classList","add","Configuration","getNamespace","dataset","String","addEventListener","call","pageable","index","item","appendChild","createTextNode","next","getHtmlElement","createStyle","activeItem","querySelector","scrollIntoView","behavior","inline","block","doUpdate","render","style","PaginationElementFactory","CustomElementFactory","doCreateElement","ElementRegistry","register"],"mappings":"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"}